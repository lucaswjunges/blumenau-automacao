<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Produtos de automa√ß√£o industrial e residencial. Sensores, inversores, CLPs, componentes eletr√¥nicos e muito mais.">
    <meta name="keywords" content="automa√ß√£o industrial, sensores, inversores, CLP, componentes eletr√¥nicos, Blumenau">
    <title>Produtos | Blumenau Automa√ß√£o</title>

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.blumenauautomacao.com.br/produtos.html">
    <meta property="og:title" content="Produtos | Blumenau Automa√ß√£o">
    <meta property="og:description" content="Produtos de automa√ß√£o industrial e residencial. Sensores, inversores, CLPs e muito mais.">
    <meta property="og:image" content="https://www.blumenauautomacao.com.br/logo1.png">

    <link rel="icon" type="image/png" href="logo1.png">
    <link rel="apple-touch-icon" href="logo1.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            900: '#1a1a2e',
                            800: '#16213e',
                            700: '#1f2b47',
                            600: '#2a3a5a'
                        },
                        accent: {
                            500: '#195F79',
                            400: '#4a9bb5',
                            300: '#7ab8c9'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <style>
        .gradient-text {
            background: linear-gradient(135deg, #7ab8c9 0%, #195F79 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #195F79 0%, #7ab8c9 100%);
        }

        .product-card {
            transition: all 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .cart-badge {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .modal-overlay {
            backdrop-filter: blur(4px);
        }

        .skeleton {
            background: linear-gradient(90deg, #1f2b47 25%, #2a3a5a 50%, #1f2b47 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body class="bg-primary-900 text-gray-200 font-sans">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-primary-900/95 backdrop-blur-sm border-b border-primary-700">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6">
            <div class="flex items-center justify-between h-16 md:h-20">
                <a href="index.html" class="flex items-center space-x-3">
                    <img src="logo1.png" alt="Blumenau Automa√ß√£o" class="h-10 md:h-12 w-auto">
                    <span class="text-xl md:text-2xl font-bold gradient-text">Blumenau Automa√ß√£o</span>
                </a>

                <nav class="hidden lg:flex items-center space-x-5">
                    <a href="index.html#servicos" class="text-gray-300 hover:text-white transition-colors whitespace-nowrap">Servi√ßos</a>
                    <a href="tecnologias.html" class="text-gray-300 hover:text-white transition-colors whitespace-nowrap">Solu√ß√µes</a>
                    <a href="know-how.html" class="text-gray-300 hover:text-white transition-colors whitespace-nowrap">Know-How</a>
                    <a href="produtos.html" class="text-accent-400 whitespace-nowrap">Produtos</a>
                    <a href="index.html#cases" class="text-gray-300 hover:text-white transition-colors whitespace-nowrap">Cases</a>
                    <a href="index.html#contato" class="text-gray-300 hover:text-white transition-colors whitespace-nowrap">Contato</a>
                    <a href="area-cliente.html" class="px-3 py-1.5 bg-primary-900 text-white rounded-lg hover:bg-primary-700 transition-colors whitespace-nowrap text-sm flex items-center gap-1.5">
                        üîê √Årea do Cliente
                    </a>
                </nav>

                <div class="flex items-center gap-4">
                    <!-- Cart Button -->
                    <button id="cart-btn" class="relative p-2 text-gray-300 hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                        <span id="cart-count" class="hidden absolute -top-1 -right-1 bg-accent-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center cart-badge">0</span>
                    </button>

                    <a href="index.html#contato" class="hidden lg:block gradient-bg text-white px-4 py-2 rounded-lg font-medium hover:opacity-90 transition-opacity whitespace-nowrap text-sm">
                        Or√ßamento
                    </a>

                    <button id="mobile-menu-btn" class="lg:hidden p-2 text-gray-300 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden lg:hidden bg-primary-800 border-t border-primary-700">
            <div class="px-4 py-4 space-y-3">
                <a href="index.html#servicos" class="block text-gray-300 hover:text-white py-2">Servi√ßos</a>
                <a href="tecnologias.html" class="block text-gray-300 hover:text-white py-2">Solu√ß√µes</a>
                <a href="know-how.html" class="block text-gray-300 hover:text-white py-2">Know-How</a>
                <a href="produtos.html" class="block text-accent-400 py-2">Produtos</a>
                <a href="index.html#cases" class="block text-gray-300 hover:text-white py-2">Cases</a>
                <a href="index.html#contato" class="block text-gray-300 hover:text-white py-2">Contato</a>
                <a href="area-cliente.html" class="inline-flex items-center gap-2 bg-primary-900 text-white px-4 py-2 rounded-lg mt-2">
                    üîê √Årea do Cliente
                </a>
            </div>
        </div>
    </header>

    <!-- Hero -->
    <section class="pt-28 pb-8 bg-primary-800">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6">
            <div class="text-center">
                <nav class="text-sm text-gray-400 mb-4">
                    <a href="index.html" class="hover:text-white">Home</a> / <span class="text-gray-300">Produtos</span>
                </nav>
                <h1 class="text-3xl md:text-4xl font-bold mb-2">
                    <span class="gradient-text">Produtos</span> para Automa√ß√£o
                </h1>
                <p class="text-gray-400 max-w-2xl mx-auto">
                    Componentes e equipamentos para automa√ß√£o industrial e residencial
                </p>
                <p id="last-update" class="text-gray-500 text-sm mt-2"></p>
            </div>
        </div>
    </section>

    <!-- Filters & Products -->
    <main class="max-w-[1400px] mx-auto px-4 sm:px-6 py-8">
        <!-- Filters Bar -->
        <div class="bg-primary-800 rounded-xl p-4 mb-8">
            <div class="flex flex-col lg:flex-row gap-4">
                <!-- Search -->
                <div class="flex-1">
                    <div class="relative">
                        <input type="text" id="search-input" placeholder="Buscar produtos..."
                               class="w-full bg-primary-700 border border-primary-600 rounded-lg px-4 py-2.5 pl-10 text-white placeholder-gray-500 focus:outline-none focus:border-accent-500">
                        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                </div>

                <!-- Category Filter -->
                <div class="w-full lg:w-48">
                    <select id="category-filter" class="w-full bg-primary-700 border border-primary-600 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-accent-500">
                        <option value="">Todas categorias</option>
                    </select>
                </div>

                <!-- Price Filter -->
                <div class="w-full lg:w-48">
                    <select id="price-filter" class="w-full bg-primary-700 border border-primary-600 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-accent-500">
                        <option value="">Todos os pre√ßos</option>
                        <option value="100-300">R$ 100 - R$ 300</option>
                        <option value="300-500">R$ 300 - R$ 500</option>
                        <option value="500-1000">R$ 500 - R$ 1.000</option>
                        <option value="1000+">Acima de R$ 1.000</option>
                    </select>
                </div>

                <!-- Sort -->
                <div class="w-full lg:w-48">
                    <select id="sort-filter" class="w-full bg-primary-700 border border-primary-600 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-accent-500">
                        <option value="name">Nome A-Z</option>
                        <option value="price-asc">Menor pre√ßo</option>
                        <option value="price-desc">Maior pre√ßo</option>
                    </select>
                </div>

                <!-- Stock Filter -->
                <label class="flex items-center gap-2 cursor-pointer whitespace-nowrap">
                    <input type="checkbox" id="stock-filter" class="w-4 h-4 rounded border-primary-600 bg-primary-700 text-accent-500 focus:ring-accent-500">
                    <span class="text-gray-300 text-sm">Apenas em estoque</span>
                </label>
            </div>
        </div>

        <!-- Results count -->
        <div class="flex items-center justify-between mb-6">
            <p id="results-count" class="text-gray-400">Carregando produtos...</p>
        </div>

        <!-- Products Grid -->
        <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Loading skeleton -->
            <div class="bg-primary-800 rounded-xl overflow-hidden">
                <div class="skeleton h-48"></div>
                <div class="p-4 space-y-3">
                    <div class="skeleton h-4 w-3/4 rounded"></div>
                    <div class="skeleton h-4 w-1/2 rounded"></div>
                    <div class="skeleton h-6 w-1/3 rounded"></div>
                </div>
            </div>
            <div class="bg-primary-800 rounded-xl overflow-hidden">
                <div class="skeleton h-48"></div>
                <div class="p-4 space-y-3">
                    <div class="skeleton h-4 w-3/4 rounded"></div>
                    <div class="skeleton h-4 w-1/2 rounded"></div>
                    <div class="skeleton h-6 w-1/3 rounded"></div>
                </div>
            </div>
            <div class="bg-primary-800 rounded-xl overflow-hidden">
                <div class="skeleton h-48"></div>
                <div class="p-4 space-y-3">
                    <div class="skeleton h-4 w-3/4 rounded"></div>
                    <div class="skeleton h-4 w-1/2 rounded"></div>
                    <div class="skeleton h-6 w-1/3 rounded"></div>
                </div>
            </div>
            <div class="bg-primary-800 rounded-xl overflow-hidden">
                <div class="skeleton h-48"></div>
                <div class="p-4 space-y-3">
                    <div class="skeleton h-4 w-3/4 rounded"></div>
                    <div class="skeleton h-4 w-1/2 rounded"></div>
                    <div class="skeleton h-6 w-1/3 rounded"></div>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <div id="pagination" class="flex justify-center gap-2 mt-8"></div>

        <!-- No results -->
        <div id="no-results" class="hidden text-center py-16">
            <svg class="w-16 h-16 mx-auto text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <h3 class="text-xl font-semibold mb-2">Nenhum produto encontrado</h3>
            <p class="text-gray-400">Tente ajustar os filtros ou buscar por outro termo</p>
        </div>
    </main>

    <!-- Cart Modal -->
    <div id="cart-modal" class="hidden fixed inset-0 z-50">
        <div class="modal-overlay absolute inset-0 bg-black/70" onclick="closeCart()"></div>
        <div class="absolute right-0 top-0 h-full w-full max-w-md bg-primary-800 shadow-2xl overflow-hidden flex flex-col">
            <!-- Cart Header -->
            <div class="flex items-center justify-between p-6 border-b border-primary-700">
                <h2 class="text-xl font-bold">Carrinho</h2>
                <button onclick="closeCart()" class="p-2 hover:bg-primary-700 rounded-lg transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <!-- Cart Items -->
            <div id="cart-items" class="flex-1 overflow-y-auto p-6">
                <p class="text-gray-400 text-center py-8">Seu carrinho est√° vazio</p>
            </div>

            <!-- Cart Footer -->
            <div class="border-t border-primary-700 p-6">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg">Total:</span>
                    <span id="cart-total" class="text-2xl font-bold text-accent-400">R$ 0,00</span>
                </div>

                <!-- Bot√£o Principal: Checkout com Mercado Pago -->
                <a href="checkout.html" id="checkout-mp-btn"
                   class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-2 hover:opacity-90 transition-opacity mb-3 pointer-events-none opacity-50">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
                    </svg>
                    Comprar com Pix/Cart√£o
                </a>

                <!-- Bot√£o Secund√°rio: WhatsApp -->
                <button id="checkout-btn" onclick="checkoutWhatsApp()" disabled
                        class="w-full bg-primary-700 text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-primary-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                    </svg>
                    Comprar pelo WhatsApp
                </button>

                <p class="text-gray-500 text-xs text-center mt-3">
                    Pagamento seguro via Mercado Pago
                </p>

                <!-- Logos de pagamento -->
                <div class="flex items-center justify-center gap-4 mt-3">
                    <!-- Pix -->
                    <div class="flex items-center gap-1 text-gray-400" title="Pix">
                        <svg class="h-5 w-5" viewBox="0 0 512 512" fill="currentColor">
                            <path d="M242.4 292.5C247.8 287.1 257.1 287.1 262.5 292.5L339.5 369.5C353.7 383.7 372.6 391.5 392.6 391.5H407.7L310.6 488.6C280.3 518.9 231.1 518.9 200.8 488.6L103.3 391.2H112.6C132.6 391.2 151.5 383.4 165.7 369.2L242.4 292.5zM262.5 218.9C257.1 224.4 247.8 224.4 242.4 218.9L165.7 142.2C151.5 128 132.6 120.2 112.6 120.2H103.3L200.2 23.31C230.5-7.08 279.7-7.08 310 23.31L407.7 120.2H392.6C372.6 120.2 353.7 128 339.5 142.2L262.5 218.9zM112.6 142.7C126.4 142.7 139.1 148.3 149.7 158.1L226.4 234.8C233.6 241.1 243 245.6 253.2 245.6H258.8C269 245.6 278.4 241.1 285.6 234.8L362.3 158.1C ## 148.3 139.1 142.7 126.4 142.7H98.63L91.28 150H112.6zM98.63 369.5L91.28 362H112.6C126.4 369.5 139.1 363.9 149.7 354.1L226.4 277.4C233.6 271.1 243 266.6 253.2 266.6H258.8C269 266.6 278.4 271.1 285.6 277.4L362.3 354.1C372.9 363.9 385.6 369.5 399.4 369.5H420.7L413.4 362H392.6C378.8 369.5 366.1 363.9 355.5 354.1L278.8 277.4C271.6 271.1 262.2 266.6 252 266.6H260C249.8 266.6 240.4 271.1 233.2 277.4L156.5 354.1C145.9 363.9 133.2 369.5 119.4 369.5H98.63z"/>
                        </svg>
                        <span class="text-xs">Pix</span>
                    </div>
                    <!-- Cartao -->
                    <div class="flex items-center gap-1 text-gray-400" title="Cartao">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
                        </svg>
                        <span class="text-xs">Cartao</span>
                    </div>
                    <!-- Boleto -->
                    <div class="flex items-center gap-1 text-gray-400" title="Boleto">
                        <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M2 4h2v16H2V4zm4 0h1v16H6V4zm2 0h2v16H8V4zm3 0h2v16h-2V4zm3 0h2v16h-2V4zm3 0h1v16h-1V4zm2 0h2v16h-2V4z"/>
                        </svg>
                        <span class="text-xs">Boleto</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- WhatsApp Float -->
    <div class="fixed bottom-6 right-6 z-40">
        <a href="https://wa.me/5547988677798" target="_blank"
           class="flex items-center justify-center w-14 h-14 bg-green-500 hover:bg-green-600 rounded-full shadow-lg transition-all hover:scale-110">
            <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
        </a>
    </div>

    <script>
        // ============================================
        // STATE
        // ============================================
        let allProducts = [];
        let filteredProducts = [];
        let categories = [];
        let cart = JSON.parse(localStorage.getItem('blumenau_cart') || '[]');
        let currentPage = 1;
        const PRODUCTS_PER_PAGE = 20;

        // ============================================
        // CART FUNCTIONS
        // ============================================
        function updateCartUI() {
            const countEl = document.getElementById('cart-count');
            const totalEl = document.getElementById('cart-total');
            const itemsEl = document.getElementById('cart-items');
            const checkoutBtn = document.getElementById('checkout-btn');
            const checkoutMpBtn = document.getElementById('checkout-mp-btn');

            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            // Update badge
            if (totalItems > 0) {
                countEl.textContent = totalItems > 99 ? '99+' : totalItems;
                countEl.classList.remove('hidden');
            } else {
                countEl.classList.add('hidden');
            }

            // Update total
            totalEl.textContent = formatPrice(totalPrice);

            // Update checkout buttons
            checkoutBtn.disabled = cart.length === 0;
            if (cart.length === 0) {
                checkoutMpBtn.classList.add('pointer-events-none', 'opacity-50');
            } else {
                checkoutMpBtn.classList.remove('pointer-events-none', 'opacity-50');
            }

            // Update items list
            if (cart.length === 0) {
                itemsEl.innerHTML = '<p class="text-gray-400 text-center py-8">Seu carrinho est√° vazio</p>';
            } else {
                itemsEl.innerHTML = cart.map(item => `
                    <div class="flex gap-4 py-4 border-b border-primary-700">
                        <img src="${item.image || 'https://via.placeholder.com/80x80?text=Sem+Imagem'}"
                             alt="${item.name}"
                             class="w-20 h-20 object-cover rounded-lg bg-primary-700"
                             onerror="this.src='https://via.placeholder.com/80x80?text=Sem+Imagem'">
                        <div class="flex-1 min-w-0">
                            <h4 class="font-medium text-sm truncate">${item.name}</h4>
                            <p class="text-accent-400 font-semibold">${item.priceFormatted || formatPrice(item.price)}</p>
                            <div class="flex items-center gap-2 mt-2">
                                <button onclick="updateQuantity('${item.id}', -1)"
                                        class="w-7 h-7 bg-primary-700 rounded flex items-center justify-center hover:bg-primary-600">-</button>
                                <span class="w-8 text-center">${item.quantity}</span>
                                <button onclick="updateQuantity('${item.id}', 1)"
                                        class="w-7 h-7 bg-primary-700 rounded flex items-center justify-center hover:bg-primary-600">+</button>
                                <button onclick="removeFromCart('${item.id}')"
                                        class="ml-auto text-red-400 hover:text-red-300 text-sm">Remover</button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // Save to localStorage
            localStorage.setItem('blumenau_cart', JSON.stringify(cart));
        }

        function addToCart(product) {
            const existing = cart.find(item => item.id === product.id);
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            updateCartUI();
            showToast(`${product.name} adicionado ao carrinho`);
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartUI();
        }

        function updateQuantity(productId, delta) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += delta;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartUI();
                }
            }
        }

        function openCart() {
            document.getElementById('cart-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeCart() {
            document.getElementById('cart-modal').classList.add('hidden');
            document.body.style.overflow = '';
        }

        // URL do Cloudflare Worker (configurar ap√≥s deploy)
        const PRICE_CHECKER_URL = null; // Ex: 'https://blumenau-price-checker.seu-subdominio.workers.dev'

        async function verifyPrices() {
            if (!PRICE_CHECKER_URL || cart.length === 0) return { verified: false, changes: [] };

            try {
                const urls = cart.map(item => item.sourceUrl).filter(Boolean);
                if (urls.length === 0) return { verified: false, changes: [] };

                const response = await fetch(`${PRICE_CHECKER_URL}/check-batch`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ urls }),
                });

                if (!response.ok) return { verified: false, changes: [] };

                const data = await response.json();
                const changes = [];

                for (const result of data.results || []) {
                    if (!result.success) continue;

                    const cartItem = cart.find(item => item.sourceUrl === result.url);
                    if (!cartItem) continue;

                    if (result.price && Math.abs(result.price - cartItem.price) > 0.01) {
                        changes.push({
                            name: cartItem.name,
                            oldPrice: cartItem.price,
                            newPrice: result.price,
                        });
                    }

                    if (result.inStock === false) {
                        changes.push({
                            name: cartItem.name,
                            outOfStock: true,
                        });
                    }
                }

                return { verified: true, changes };
            } catch (error) {
                console.error('Erro ao verificar pre√ßos:', error);
                return { verified: false, changes: [] };
            }
        }

        async function checkoutWhatsApp() {
            if (cart.length === 0) return;

            const checkoutBtn = document.getElementById('checkout-btn');
            const originalText = checkoutBtn.innerHTML;

            // Mostrar loading
            checkoutBtn.disabled = true;
            checkoutBtn.innerHTML = `
                <svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Verificando pre√ßos...
            `;

            // Verificar pre√ßos em tempo real
            const { verified, changes } = await verifyPrices();

            // Restaurar bot√£o
            checkoutBtn.innerHTML = originalText;
            checkoutBtn.disabled = false;

            // Se houve mudan√ßas, alertar o usu√°rio
            if (changes.length > 0) {
                const changesText = changes.map(c => {
                    if (c.outOfStock) return `‚Ä¢ ${c.name}: INDISPON√çVEL`;
                    return `‚Ä¢ ${c.name}: ${formatPrice(c.oldPrice)} ‚Üí ${formatPrice(c.newPrice)}`;
                }).join('\n');

                const proceed = confirm(
                    `Aten√ß√£o! Detectamos altera√ß√µes:\n\n${changesText}\n\nDeseja prosseguir com o pedido? Os pre√ßos ser√£o confirmados pelo atendente.`
                );

                if (!proceed) return;
            }

            const items = cart.map(item =>
                `‚Ä¢ ${item.quantity}x ${item.name} - ${item.priceFormatted || formatPrice(item.price)}`
            ).join('\n');

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            let message = `Ol√°! Gostaria de fazer um pedido:\n\n${items}\n\n*Total: ${formatPrice(total)}*`;

            if (!verified) {
                message += '\n\n_(Pre√ßos sujeitos a confirma√ß√£o)_';
            } else if (changes.length > 0) {
                message += '\n\n_(Pre√ßos verificados - altera√ß√µes detectadas)_';
            } else {
                message += '\n\n_(Pre√ßos verificados em tempo real)_';
            }

            window.open(`https://wa.me/5547988677798?text=${encodeURIComponent(message)}`, '_blank');
        }

        // ============================================
        // PRODUCT FUNCTIONS
        // ============================================
        async function loadProducts() {
            try {
                const response = await fetch('products.json');
                if (!response.ok) throw new Error('Arquivo n√£o encontrado');

                const data = await response.json();
                allProducts = data.products || [];
                categories = data.categories || [];

                // Update last update time
                if (data.lastUpdated) {
                    const date = new Date(data.lastUpdated);
                    document.getElementById('last-update').textContent =
                        `Atualizado em ${date.toLocaleDateString('pt-BR')} √†s ${date.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}`;
                }

                // Populate category filter
                const categoryFilter = document.getElementById('category-filter');
                categoryFilter.innerHTML = '<option value="">Todas categorias</option>' +
                    categories.map(cat => `<option value="${cat.id}">${cat.name} (${cat.count})</option>`).join('');

                filterProducts();
            } catch (error) {
                console.error('Erro ao carregar produtos:', error);
                document.getElementById('products-grid').innerHTML = `
                    <div class="col-span-full text-center py-16">
                        <svg class="w-16 h-16 mx-auto text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                        <h3 class="text-xl font-semibold mb-2">Erro ao carregar produtos</h3>
                        <p class="text-gray-400">Por favor, tente novamente mais tarde</p>
                    </div>
                `;
                document.getElementById('results-count').textContent = '';
            }
        }

        function filterProducts() {
            const search = document.getElementById('search-input').value.toLowerCase();
            const category = document.getElementById('category-filter').value;
            const priceRange = document.getElementById('price-filter').value;
            const sort = document.getElementById('sort-filter').value;
            const stockOnly = document.getElementById('stock-filter').checked;

            filteredProducts = allProducts.filter(product => {
                // Search
                if (search && !product.name.toLowerCase().includes(search) &&
                    !(product.sku && product.sku.toLowerCase().includes(search))) {
                    return false;
                }

                // Category
                if (category && product.category !== category) {
                    return false;
                }

                // Price
                if (priceRange && product.price) {
                    const [min, max] = priceRange.split('-').map(v => v === '+' ? Infinity : parseFloat(v));
                    if (product.price < min || (max && product.price > max)) {
                        return false;
                    }
                }

                // Stock
                if (stockOnly && !product.inStock) {
                    return false;
                }

                return true;
            });

            // Sort
            filteredProducts.sort((a, b) => {
                switch (sort) {
                    case 'price-asc':
                        return (a.price || 0) - (b.price || 0);
                    case 'price-desc':
                        return (b.price || 0) - (a.price || 0);
                    default:
                        return a.name.localeCompare(b.name);
                }
            });

            currentPage = 1;
            renderProducts();
        }

        function renderProducts() {
            const grid = document.getElementById('products-grid');
            const noResults = document.getElementById('no-results');
            const resultsCount = document.getElementById('results-count');

            const start = (currentPage - 1) * PRODUCTS_PER_PAGE;
            const end = start + PRODUCTS_PER_PAGE;
            const pageProducts = filteredProducts.slice(start, end);

            resultsCount.textContent = `${filteredProducts.length} produto${filteredProducts.length !== 1 ? 's' : ''} encontrado${filteredProducts.length !== 1 ? 's' : ''}`;

            if (pageProducts.length === 0) {
                grid.innerHTML = '';
                noResults.classList.remove('hidden');
                document.getElementById('pagination').innerHTML = '';
                return;
            }

            noResults.classList.add('hidden');

            grid.innerHTML = pageProducts.map(product => `
                <div class="product-card bg-primary-800 rounded-xl overflow-hidden">
                    <div class="relative h-48 bg-primary-700">
                        <img src="${product.image || 'https://via.placeholder.com/300x200?text=Sem+Imagem'}"
                             alt="${product.name}"
                             class="w-full h-full object-contain p-4"
                             loading="lazy"
                             onerror="this.src='https://via.placeholder.com/300x200?text=Sem+Imagem'">
                        ${product.inStock ?
                            `<span class="absolute top-2 right-2 bg-green-500/90 text-white text-xs px-2 py-1 rounded-full">Em estoque</span>` :
                            `<span class="absolute top-2 right-2 bg-red-500/90 text-white text-xs px-2 py-1 rounded-full">Indispon√≠vel</span>`
                        }
                        <span class="absolute top-2 left-2 bg-blue-500/90 text-white text-xs px-2 py-1 rounded-full">Novo</span>
                    </div>
                    <div class="p-4">
                        ${product.brand ? `<p class="text-gray-500 text-xs mb-1">${product.brand}</p>` : ''}
                        <h3 class="font-semibold mb-2 line-clamp-2 h-12">${product.name}</h3>
                        <p class="text-accent-400 text-xl font-bold mb-4">
                            ${product.priceFormatted || 'Sob consulta'}
                        </p>
                        <div class="flex gap-2">
                            <button onclick='addToCart(${JSON.stringify(product).replace(/'/g, "\\'")})'
                                    class="flex-1 gradient-bg text-white py-2 px-3 rounded-lg text-sm font-medium hover:opacity-90 transition-opacity ${!product.inStock ? 'opacity-50 cursor-not-allowed' : ''}"
                                    ${!product.inStock ? 'disabled' : ''}>
                                Adicionar
                            </button>
                            <a href="produto.html?id=${encodeURIComponent(product.id)}"
                               class="bg-primary-700 text-white py-2 px-3 rounded-lg text-sm hover:bg-primary-600 transition-colors flex items-center justify-center">
                                Detalhes
                            </a>
                        </div>
                    </div>
                </div>
            `).join('');

            renderPagination();
        }

        function renderPagination() {
            const totalPages = Math.ceil(filteredProducts.length / PRODUCTS_PER_PAGE);
            const pagination = document.getElementById('pagination');

            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            let html = '';

            // Previous
            html += `<button onclick="goToPage(${currentPage - 1})"
                             class="px-3 py-2 bg-primary-800 rounded-lg hover:bg-primary-700 transition-colors ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}"
                             ${currentPage === 1 ? 'disabled' : ''}>
                        &laquo;
                     </button>`;

            // Pages
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
                    html += `<button onclick="goToPage(${i})"
                                     class="px-3 py-2 rounded-lg transition-colors ${i === currentPage ? 'gradient-bg text-white' : 'bg-primary-800 hover:bg-primary-700'}">
                                ${i}
                             </button>`;
                } else if (i === currentPage - 3 || i === currentPage + 3) {
                    html += `<span class="px-2 text-gray-500">...</span>`;
                }
            }

            // Next
            html += `<button onclick="goToPage(${currentPage + 1})"
                             class="px-3 py-2 bg-primary-800 rounded-lg hover:bg-primary-700 transition-colors ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}"
                             ${currentPage === totalPages ? 'disabled' : ''}>
                        &raquo;
                     </button>`;

            pagination.innerHTML = html;
        }

        function goToPage(page) {
            const totalPages = Math.ceil(filteredProducts.length / PRODUCTS_PER_PAGE);
            if (page < 1 || page > totalPages) return;
            currentPage = page;
            renderProducts();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ============================================
        // UTILITIES
        // ============================================
        function formatPrice(value) {
            if (!value) return 'Sob consulta';
            return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-20 left-1/2 -translate-x-1/2 bg-primary-700 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            updateCartUI();

            // Cart button
            document.getElementById('cart-btn').addEventListener('click', openCart);

            // Mobile menu
            document.getElementById('mobile-menu-btn').addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.toggle('hidden');
            });

            // Filters
            document.getElementById('search-input').addEventListener('input', debounce(filterProducts, 300));
            document.getElementById('category-filter').addEventListener('change', filterProducts);
            document.getElementById('price-filter').addEventListener('change', filterProducts);
            document.getElementById('sort-filter').addEventListener('change', filterProducts);
            document.getElementById('stock-filter').addEventListener('change', filterProducts);

            // Close modals on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeCart();
                    closeProductModal();
                }
            });
        });
    </script>

    <!-- Footer -->
    <footer class="bg-primary-800 border-t border-primary-700 py-10">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6">
            <div class="grid md:grid-cols-3 gap-8 mb-8">
                <div>
                    <h5 class="text-sm font-semibold text-white mb-3">Institucional</h5>
                    <ul class="space-y-2 text-gray-400 text-sm">
                        <li><a href="termos-uso.html" class="hover:text-accent-400 transition-colors">Termos de Uso</a></li>
                        <li><a href="politica-privacidade.html" class="hover:text-accent-400 transition-colors">Pol√≠tica de Privacidade</a></li>
                        <li><a href="politica-trocas.html" class="hover:text-accent-400 transition-colors">Trocas e Devolu√ß√µes</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-sm font-semibold text-white mb-3">Formas de Pagamento</h5>
                    <div class="flex flex-wrap gap-2">
                        <span class="bg-primary-700 rounded px-2 py-1 text-xs text-gray-300">Pix (10% desc.)</span>
                        <span class="bg-primary-700 rounded px-2 py-1 text-xs text-gray-300">Cart√£o at√© 12x</span>
                        <span class="bg-primary-700 rounded px-2 py-1 text-xs text-gray-300">Boleto</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">Pagamento seguro via Mercado Pago</p>
                </div>
                <div>
                    <h5 class="text-sm font-semibold text-white mb-3">Seguran√ßa</h5>
                    <div class="flex flex-wrap gap-2">
                        <span class="bg-green-900/30 text-green-400 rounded px-2 py-1 text-xs flex items-center gap-1">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                            SSL Seguro
                        </span>
                        <span class="bg-blue-900/30 text-blue-400 rounded px-2 py-1 text-xs flex items-center gap-1">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                            Compra Garantida
                        </span>
                    </div>
                </div>
            </div>
            <div class="border-t border-primary-700 pt-6 text-center text-gray-500 text-sm">
                <p>&copy; 2025 Blumenau Automa√ß√£o. Todos os direitos reservados.</p>
                <p class="text-xs mt-1">Rua Jo√£o Pessoa, 2750, Bloco B - Velha, Blumenau/SC - CEP 89036-256 | <a href="https://www.google.com/maps?q=-26.920583,-49.099500" target="_blank" rel="noopener noreferrer" class="text-accent-400 hover:text-accent-300">Ver no Mapa</a></p>
            </div>
        </div>
    </footer>
</body>
</html>
